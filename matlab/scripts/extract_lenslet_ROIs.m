%%% Script for running python command to save-out each of the lenslet
%%% images, and then  to register them. 
%%%% THIS SCRIPT IS NOT FUNCTIONAL. 


baseDir = '/home/izkula/Data/data/';
processedDataDir = '/home/izkula/Data/processedData/';
srcDir = '/home/izkula/src/COSMOS/scripts';
pythonDir = '/home/izkula/anaconda/bin/python';


data = {
%     {'20171101', 'cux2m1_COSMOSTestSNR_sess1_1', 'lenslet-1', 1};... %%% Shorter recording, potentially discard.
    {'20171101', 'cux2m1_COSMOSTestSNR_sess2_1', 'lenslet-2', 1};...
    {'20171101', 'cux2m1_COSMOSTestSNR_sess3_1', 'lenslet-3', 1};...
%     {'20171101', 'cux2m1_COSMOSTestSNR_sess4_1', 'lenslet-4', 1};...
%     {'20171101', 'cux2m1_COSMOSTestSNR_sess11_f16_1', 'f16-1', 2};...
%     {'20171101', 'cux2m1_COSMOSTestSNR_sess12_f2_1',  'f2-2', 3};...
%     {'20171101', 'cux2m1_COSMOSTestSNR_sess13_f4_1',  'f4-2', 3};...
%     {'20171101', 'cux2m1_COSMOSTestSNR_sess14_f1.2_1',  'f1.2-2', 3};...
%     {'20171101', 'cux2m1_COSMOSTestSNR_sess15_f8_1',  'f8-2', 3};...
%     {'20171101', 'cux2m1_COSMOSTestSNR_sess16_f2.6_1',  'f2.8-2', 3};...
%     {'20171101', 'cux2m1_COSMOSTestSNR_sess17_f16_1',  'f16-2', 3};...
%     {'20171101', 'cux2m1_COSMOSTestSNR_sess18_f5.6_1',  'f5.6-2', 3};...
%     {'20171101', 'cux2m1_COSMOSTestSNR_sess19_f5.6_1',  'f5.6-3', 4};...
%     {'20171101', 'cux2m1_COSMOSTestSNR_sess20_f2.8_1',  'f2.8-3', 4};...
%     {'20171101', 'cux2m1_COSMOSTestSNR_sess21_f4_1',  'f4-3', 4};...
%     {'20171101', 'cux2m1_COSMOSTestSNR_sess22_f16_1',  'f16-3', 4};...
%     {'20171101', 'cux2m1_COSMOSTestSNR_sess23_f2_1',  'f2-3', 4};...
}



for i = 1:numel(data)
    d = data{i};
    
    inDir = fullfile(baseDir, d{1}, d{2}, '/');
    outDir = fullfile(processedDataDir, d{1}, d{2}, '/');
    nRois = 4
    scaleFactor = 1
    
    if ~exist(outDir, 'dir'); mkdir(outDir); end
    
    cmd = ['python', ' ', fullfile(srcDir, 'convert_and_crop_stack.py'), ' ', ...
           '"', inDir, '"', ' ', '"', outDir, '"', ' ', '--scale', ' ', num2str(scaleFactor), ...
           ' ', '--rois', ' ', num2str(nRois)]
       
    [status, result] = system(cmd)
end
